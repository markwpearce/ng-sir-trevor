!function(){"use strict";angular.module("SirTrevor",[]).provider("SirTrevor",function(){this.$get=function(){return window.SirTrevor},this.Blocks=window.SirTrevor.Blocks,this.Block=window.SirTrevor.Block,this.Formatters=window.SirTrevor.Formatters,this.Formatter=window.SirTrevor.Formatter,this.Locales=window.SirTrevor.Locales,this.DEFAULTS=window.SirTrevor.DEFAULTS}).provider("SirTrevorOptions",function(){var r={blockTypes:["Text"],transform:{get:function(r){return{type:r.blockStorage.type,data:r.blockStorage.data}},set:function(r){return{type:r.type,data:r.data}}}};this.$get=function(){return r},this.$extend=function(t){angular.extend(r,t)},this.$set=function(t){r=t}}).directive("ngSirTrevor",["SirTrevor","SirTrevorOptions",function(r,t){var e={template:function(r){var t='<textarea class="sir-trevor" name="content"></textarea>';return r.parent("form").length||(t="<form>"+t+"</form>"),t},scope:{editor:"=stModel",params:"=stParams"},link:function(e,o){var n=angular.copy(t);angular.extend(n,e.params),n.el=$(o.find("textarea")),e.editor=new r.Editor(n),e.editor.get=function(){var r=[];return e.editor.block_manager.blocks.sort(function(r,t){return r.$el.index()-t.$el.index()}),angular.forEach(e.editor.block_manager.blocks,function(t){e.editor.validateAndSaveBlock(t),r.push(n.transform.get(t))}),r},e.editor.set=function(r){var t;angular.forEach(r,function(r){t=n.transform.set(r),e.editor.block_manager.createBlock(t.type,t.data)})},e.editor.clear=function(){angular.forEach(e.editor.block_manager.blocks,function(r){e.editor.block_manager.removeBlock(r.blockID)})}}};return e}])}();